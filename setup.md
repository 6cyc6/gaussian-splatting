## Quick Setup

### Setup Conda Environment (checked also on cluster)
```
git clone https://github.com/6cyc6/gaussian-splatting.git --recursive
conda env create --file environment.yml  # change the env name to whatever you like before running it
conda activate <env_name>
```

For faster training:
```
pip uninstall diff-gaussian-rasterization -y
cd submodules/diff-gaussian-rasterization
rm -r build
git checkout 3dgs_accel
pip install .
```
Then you can add `--optimizer_type sparse_adam` to use the sparse adam optimizer when running `train.py`.

---

## Build training dataset
### Install COLMAP and ImageMagick (not working on cluster)
COLMAP: Follow `https://colmap.github.io/install.html`.

We may need to run `export PATH=$PATH:/usr/local/bin` before running COLMAP. You can also add this to `.bashrc`.

To check if COLMAP is successfully installed and ready for running: `colmap -h`.

---

ImageMagick: Follow `https://imagemagick.org/script/install-source.php`.

We may need to run `export PATH=$PATH:/usr/local/bin` before running COLMAP. You can also add this to `.bashrc`.

To check if COLMAP is successfully installed and ready for running: `magick identify -version`.

---

### Prepare dataset (Use YCB Dataset)

First, We need a couple of images of a scene captured by cameras from different viewpoints.
We can download the [YCB video dataset](https://rse-lab.cs.washington.edu/projects/posecnn/).

Then, change the directories and `division_number` in `scripts/move_files.py` and run:
```
scripts/move_files.py
```
to extract a couple of images from one video. (The script is generated by ChatGPT.) You may need to change the division 
number and run the script for several times until you get enough images (around 200).

Before running the script to preprocess the images, change the folder name to `input`. Otherwise, the script would not work.
Finally, run:
```
python convert.py -s <location> --resize
```
It would take a while to run the Sfm algorithm to prepare the training data.

---

## Training

Run:
```
python train.py -s <path to COLMAP or NeRF Synthetic dataset>
```
We can use tensorboard to check the learning curve and rendered images.

To check the `.ply` point cloud result, you can drag the file to this [website](https://playcanvas.com/supersplat/editor/).
